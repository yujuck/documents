## Proxy Server
Proxy Server는 클라이언트가 자신을 통해서 다른 네트워크 서비스에 간접적으로 접속할 수 있게 해 주는 컴퓨터 시스템이나 응용 프로그램을 가리킨다.<br />
서버와 클라이언트 사이의 중계기로서 대리로 통신하는 것을 `proxy`라고 하고,<br />
그 중계 기능을 하는 것을 `proxy server`라고 한다.

위키백과에 나와있는 프록시 서버의 정의다.<br />
간단하게 중간 위치에서 중계기 역할을 하는 서버라고 생각하면 될 것 같다.<br />
프록시를 사용하는 이유는 `보안성, 성능, 안정성을 향상`시킬 수 있기 때문이다.<br />
또한 `캐시`를 이용해 데이터를 저장해 둘 수 있어서 동일한 응답이 전송되어야 하는 경우에는 서버에 요청하지 않고 바로 전송하면서 전송 시간을 절약할 수 있다.<br />

다음은 위키백과에 나와있는 프록시 서버의 사용 목적이다.

- 익명으로 컴퓨터를 유지 (주로 보안을 위하여)
- 캐시를 사용하여 리소스로의 접근을 빠르게 하기 위해. 웹 프록시는 웹 서버로부터 웹 페이지를 캐시로 저장하는 데 흔히 쓰인다.
- 네트워크 서비스나 콘텐츠로의 접근 정책을 적용하기 위해. (이를테면 원치 않는 사이트를 차단)
- 사용률을 기록하고 검사하기 위해 (이를테면 회사는 인터넷 이용을 파악)
- 보안 및 통제를 뚫고 나가기 위해
- 바이러스 전파, 악성 루머 전파, 다른 정보들을 빼낼 목적으로
- 역으로 IP추적을 당하지 않을 목적으로
- 전달에 앞서 악성 코드를 목적으로 전달된 콘텐츠를 검사하기 위해
- 밖으로 나가는 콘텐츠를 검사하기 위해 (데이터 유출 보호)
- 지역 제한을 우회하기 위해

프록시에는 두 가지 종류가 있는데 `Forward Proxy`와 `Reverse Proxy`이다.

## Forward Proxy
보통 그냥 프록시라고 했을 때 말하는게 forward proxy인데,<br />
클라이언트 바로 뒤에 있어서 `같은 내부망에 존재하는 클라이언트`의 요청을 포워드 프록시 서버가 중간에서 받아서 웹 서버에 요청을 전달하고, 
서버로부터 응답을 받으면 다시 포워드 프록시를 거쳐 클라이언트에게 전달된다.<br />

예를 들어 google.com을 요청하면 포워드 프록시 서버가 google.com 리소스를 대신 받아와서 클라이언트에게 전달해주는 것이다.

### Forward Proxy 사용 이유
#### 제한적인 사용
내부 정보가 중요하다던가 하는 기업이나 정부 기관에서는 인터넷 사용에 제한을 걸기 위해 방화벽을 사용하는 경우가 많은데, 포워드 프록시 서버가 방화벽과 같은 개념으로 제한을 위해 사용된다고 보면 된다.<br />
클라이언트의 요청을 중간에서 가로채기 때문에 포워드 프록시 서버의 설정에 따라 특정 사이트에 접속하는 것을 막을 수 있다.<br />

#### 캐싱
어떤 페이지에 한번 접근하면 프록시 서버는 해당 페이지 서버의 정보를 캐싱해둔다.<br />
이후 똑같은 페이지에 대한 요청이 있을 때, 캐시되어있는 정보를 전달하면서 서버의 부하를 줄이는 효과와 빠른 속도로 조회할 수 있다는 장점이 있다.<br />

#### 보안, 암호화
포워드 프록시 서버를 사용하면 사용자의 정체를 숨길 수 있다.<br />
클라이언트 입장에서 보면 요청을 가로채는 뭔가.. 제한만 하는 서버같지만<br />
서버 쪽에서 보면 클라이언트 정보를 알 수 없게 숨길 수 있는 서버이기도 한 것이다.<br />

클라이언트 요청은 포워드 프록시 서버를 통과할 때 암호화된다.<br />
이때 클라이언트의 ip가 감춰지기 때문에 포워드 프록시 서버를 사용하면 클라이언트의 ip를 찾기 어렵다.<br />
찾더라도 포워드 프록시 서버 ip만 볼 수 있다. 

## Reverse Proxy
> 컴퓨터 네트워크에서 클라이언트를 대신해서 한 대 이상의 서버로부터 자원을 추출하는 프록시 서버의 일종
> 관련 서버들을 위해 임의의 클라이언트가 해당 서버에 접속하는 중간 매개체이다.

리버스 프록시는 웹 서버(또는 WAS) 앞에 위치한다.
클라이언트가 웹서버에 요청하는 것이 아닌 프록시에 요청을 하고, 프록시가 뒤에 있는 서버로부터 응답을 전달받아 클라이언트에게 다시 전달하는 방식으로 흘러간다.<br />

이 방식은 내부 인트라넷에 있는 서버를 호출하기 위해 인터넷 망에 있는 클라이언트가 리버스 프록시 서버에 요청하여 응답을 받는 방식이다.<br />

### Reverse Proxy 사용 이유
#### 보안
Forward Proxy와 반대로 서버의 정보를 숨길 수 있다.<br />
원래 서버의 IP 주소를 노출시키지 않을 수 있기 때문에 해킹 위험을 덜 수 있다.<br />
리버스 프록시 서버 자체가 타겟이 될 수는 있음..

일반적으로 WS - WAS 분리 형태를 Reverse Proxy라고 보면 된다고 한다. ([여기서](https://inpa.tistory.com/entry/NETWORK-%F0%9F%93%A1-Reverse-Proxy-Forward-Proxy-%EC%A0%95%EC%9D%98-%EC%B0%A8%EC%9D%B4-%EC%A0%95%EB%A6%AC))<br />
WS(apache, nginx,,)가 reverse proxy가 된다.<br />
근데 물리적인 한 서버에 같이 있으면 reverse proxy라고 볼 수 없다고 한다..(?)


#### 로드 밸런싱
특정 서버가 과부하되지 않게 트래픽을 분산시킬 수 있다.

#### 캐싱
포워드 프록시와 동일한데, 어떻게 보면 프록시의 기능이라고 볼 수 있다.<br />
데이터를 캐싱하고 있어서 서버에 요청하지 않고 바로 응답을 전달할 수 있다.

#### 암호화
SSL 암호화에 좋다고 한다.<br />
클라이언트-서버 통신에서 SSL로 암호화, 복호화를 하면 비용이 많이 드는데,<br />
리버스 프록시를 사용하면 들어오는 요청을 모두 복호화하고 나가는 응답을 암호화해줘서 보안에도 좋고 원래 서버의 부담을 줄요줄 수도 있다고 한다.<br />
또 HTTPS의 인증서 관리를 하나의 프록시 서버가 담당하고 나머지 서버는 HTTP로 서비스 할 수도 있는데, <br />
이렇게 하면 서버를 실행할 때마다 인증서 관리를 하지 않아도 되는 장점이 있다.

## 결론?
로드밸런싱, 캐싱, SSL (HTTPS) 모두 `웹 서버를 사용한 기술`에다가 적어놔서 따로따로 생각했는데<br />
프록시 서버의 사용 이유라서 약간 혼란(?)

참고 페이지
- [[Infra] 리버스 프록시(reverse proxy) 서버 개념](https://losskatsu.github.io/it-infra/reverse-proxy/#3-%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9Creverse-proxy-%EC%84%9C%EB%B2%84%EB%9E%80)
- [[WEB] 🌐 Reverse Proxy / Forward Proxy 정의 & 차이 정리](https://inpa.tistory.com/entry/NETWORK-%F0%9F%93%A1-Reverse-Proxy-Forward-Proxy-%EC%A0%95%EC%9D%98-%EC%B0%A8%EC%9D%B4-%EC%A0%95%EB%A6%AC)
- [Forward Proxy와 Reverse Proxy 차이점](https://firework-ham.tistory.com/23)
- 위키백과