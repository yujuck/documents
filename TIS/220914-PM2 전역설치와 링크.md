## PM2 설치

공식 문서를 보면 pm2의 설치는 npm 또는 yarn을 이용해서 쉽게 가능하다고 되어있다.<br />
보통 진행하는 프로젝트마다 다른 노드 버전을 사용할 수도 있어서 nvm으로 node의 버전을 관리하는데,<br />
각 node 버전마다 pm2를 설치하기보다 한번 설치하면 다른 버전에서도 사용할 수 있도록 하는 방법을 찾는 것이 1차 목표였다.

역시 마음이 급해서인지.. 제대로 찾아보려고 해서 그런건지 몰라도 오늘 한가지 방법은 찾았다.<br />
`심볼릭 링크`를 사용하는 방법이다.

먼저 원격 서버에 접속했을 때 pm2의 설치 유무를 판단한 후 설치가 되어있지 않다면,<br />
현재 node 버전에 글로벌로 설치를 한다. (nvm으로 node를 관리하는 상황)<br />
그러면 pm2는 해당 노드 버전 밑에 설치가 되기 때문에 다른 노드 버전을 사용하면 pm2 커맨드를 찾을 수 없다.<br />
그렇기 때문에 pm2 설치 후 `ln -s <pm2 설치경로> /usr/local/bin`을 실행시켜서<br />
pm2를 최상위에 bin 폴더에 위치시키면 노드 버전이 달라지더라도 pm2 명령어를 찾을 수 있다.

<br />

## ln 명령어
리눅스에서 `ln` 명령어는 `link`의 약자이고, 링크파일을 만드는 명령어이다.<br />
링크는 `하드 링크`, `심볼릭 링크`가 존재한다


### 심볼릭 링크
> 절대 경로 또는 상대 경로의 형태로 된 다른 파일이나 디렉터리에 대한 참조를 포함하고 있는 특별한 종류의 파일

특정 파일 또는 디렉터리의 바로가기를 생성하는 것과 마찬가지라고 생각하니까 쉽게 이해가 됐다.<br />
원본을 가리키기고 있는 것이기 때문에 원본이 사라지면 그냥 연결이 끊어진 링크만 남는게 되는거고<br />
링크를 삭제하는 경우에는 링크만 삭제되고 원본은 삭제되지 않는다.<br />

`ln -s <원본 파일 및 디렉토리> <링크 파일 만들 경로>`로 생성할 수 있다.

`stat <파일이름>` 명령어로 link 상태를 확인할 수 있다.

<br />

### 하드 링크
> 파일 시스템의 파일의 이름과 연결되는 디렉터리 엔트리

심볼릭 링크 검색할 때는 inode라는 개념이 안나왔는데 하드 링크 검색하니까 갑자기 inode가 나온다..

하드 링크를 만들면 원본 파일과 동일한 inode를 직접 가리킨다.<br />
이것도 그냥 쉽게 말하자면 원본 파일을 다른 이름으로 가지고 있는 것이라고 생각하면 좀 쉬운 것 같다.
원본 파일이 사라지더라도 링크 파일로 접근할 수 있고,<br />
동일한 파일을 가리키고 있기 때문에 링크 파일을 수정하면 원본 파일도 변경된다.<br />

아무 옵션 없이 ln 명령어를 사용하면 하드 링크로 생성이 된다.
`ln <원본> <링크 경로>`로 생성할 수 있다.